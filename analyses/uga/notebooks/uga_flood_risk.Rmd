---
title: '<img src="https://drive.google.com/uc?id=118y5T73-iSUZoAMtoJGddxq9QzD_GDKX" style="height:40px;float:left; margin:10px" /><img src="https://drive.google.com/uc?id=1fHQUzF3ZjaoHj9KQ33-94dK_X1hcmjzW" style="height:50px;float:left; margin:10px" />'
pagetitle: "UGA flood risk MAM 2022" 
output:
  html_document:
    css: ../../country_template/docs/style.css
    includes:
      in_header: ../../country_template/docs/header.html
    df_print: paged
    toc: yes
    toc_float: yes
    toc_depth: 4
  pdf_document:
    toc: yes
    toc_depth: '4'
editor_options:
  chunk_output_type: inline
---

```{r setup, include = FALSE, message = FALSE, warning = FALSE}
knitr::opts_chunk$set(echo = FALSE) # do not print code by default
knitr::opts_chunk$set(include = TRUE) # include chunk output by default
knitr::opts_chunk$set(message = FALSE) # do not print messages by default
knitr::opts_chunk$set(warning = FALSE) # do not print warnings by default

options(scipen = 999) # turn off scientific notation
options(encoding = "UTF-8") # set encoding to UTF-8 instead of ANSI

# paths
data_dir <- Sys.getenv("AA_DATA_DIR") 
public_raw_uga_dir <- paste0(data_dir,'/public/raw/uga')
private_exploration_uga_dir <- paste0(data_dir,'/private/exploration/uga')
forecast_image_path <- paste0(private_exploration_uga_dir, "/icpac/forecast_adm1_overlay_20220301.png")
forecast_data_path <- paste0(private_exploration_uga_dir, "/icpac/stats_summary_20220301.csv")
uga_adm1_shapefile_path <- paste0(public_raw_uga_dir, "/cod_ab/uga_admbnda_ubos_20200824_shp/uga_admbnda_adm1_ubos_20200824.shp")
uga_adm3_shapefile_path <- paste0(public_raw_uga_dir, "/cod_ab/uga_admbnda_ubos_20200824_shp/uga_admbnda_adm3_ubos_20200824.shp")
ec_jrc_image_path <- paste0(private_exploration_uga_dir, "/ec_jrc_uga_flood_risk_adm3_20220302.png")

```

```{r libraries, include = FALSE}
packages <- c('tidyverse', 'ggthemes', 'kableExtra', 'knitr', 'flextable')

# install packages not yet installed
installed_packages <- packages %in% rownames(installed.packages())

if (any(installed_packages == FALSE)) {
  install.packages(packages[!installed_packages])
}

# load libraries 
lapply(packages, library, character.only = TRUE)

```


<br>
<br>
<br>

## Uganda Flood Risk MAM 2022
Analysis last updated on: `r Sys.Date()`

This report compiles data on the risk of flood and its potential humanitarian impact.

***

```{r maps, dpi=300, include=T, message= FALSE, warning=FALSE, fig.height=8, fig.align="center"}

```

### Flood Risk

```{r flood_risk, include = FALSE, message = FALSE, warning = FALSE}
#source("process_flood_risk_data.R")

```
The map below depicts flood prone areas for flood events with 10-year return period. Resolution is approx. 1km and colors indicate water depth (in m). 

&nbsp;

![EC-JRC](`r ec_jrc_image_path`)


```{r displacement}

```

```{r population}


```

### Precipitation Forecast MAM 2022

[ICPAC](https://www.icpac.net/seasonal-forecast/) issued its seasonal forecast the months of March through May 2022. On it is the overlay of boundaries for adm1 regions. The colours indicate probability that the 3-month period receives above average rainfall. Probabilities above 40 are considered high and likely. The assumption is that above-average rainfall increases the risk of flooding.

&nbsp;

![](`r forecast_image_path`)

```{r precipitation_forecast}
forecast_table <- read.csv(forecast_data_path)

forecast_table %>%
  select(ADM1_EN, mean_ADM1_PCODE, X80quant_ADM1_PCODE, perc_thresh) %>%
  mutate(mean_ADM1_PCODE = round(mean_ADM1_PCODE, 1),
         X80quant_ADM1_PCODE = round(X80quant_ADM1_PCODE, 1),
         perc_thresh = round(perc_thresh, 1)
         ) %>%
  knitr::kable(caption = "Above Average Precipitation Forecast Summary per Adm1",
               col.names = c('Region', 'Mean Probability', 'Min prob for 80% of area', 'Perc of area with at least 40% prob'),
               align = c('l', 'c', 'c', 'c')) %>%
        kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"),
                      fixed_thead = T) 

```

The four regions vary in their forecasted likelihood of receiving above average precipitation. We note that the country's north-east (yellow on the map) is the most likely to experience a particularly wet season. Note that the likelihood is not uniform within a region. Seasonal forecasts do not enable more granular projections (for example, at adm 2 or adm3). The exact location of higher probabilities (that is, yellow pixels in the image) may shift within an adm1 and/or across boundaries between two regions when it comes to actual rainfall.

The summary table report that the Eastern and Northern regions are the most likely to see above average precipitation: they have the highest average probability (ie highest certainty) over the majority of their areas (46.9 and 46.1, respectively.) They also have the largest portions of their area with a probability above 40% and considered "likely" (83.4% and 76.2%, respectively.)


## Sources

**Flood risk**

* [EC JRC](https://data.jrc.ec.europa.eu/dataset/jrc-floods-floodmapgl_rp10y-tif)

